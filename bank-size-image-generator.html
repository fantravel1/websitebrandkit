<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icon Image Generator - Complete Social Media & Favicon Tool</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;500;600;700;800;900&display=swap');
        
        :root {
            --primary: #0066FF;
            --secondary: #FF6B35;
            --dark: #0A0E27;
            --darker: #050714;
            --light: #F7F8FA;
            --cyan: #00D4FF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #f5f5f5;
            padding: 20px;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-family: 'Space Grotesk', sans-serif;
            color: var(--dark);
            margin-bottom: 10px;
        }
        
        .header p {
            color: #666;
            font-size: 18px;
        }
        
        .controls {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
        }
        
        .control-group {
            margin-bottom: 20px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }
        
        .control-group input, .control-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 16px;
        }
        
        /* Emoji Picker Styles */
        .emoji-picker-wrapper {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        
        .emoji-search {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .emoji-categories {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .category-btn {
            padding: 8px 16px;
            border: 2px solid #e0e0e0;
            background: white;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }
        
        .category-btn:hover {
            background: #f0f0f0;
        }
        
        .category-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
            gap: 5px;
            max-height: 300px;
            overflow-y: auto;
            padding: 10px;
            background: white;
            border-radius: 8px;
        }
        
        .emoji-option {
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }
        
        .emoji-option:hover {
            background: #f0f0f0;
            transform: scale(1.1);
        }
        
        .emoji-option.selected {
            background: var(--primary);
            border-color: var(--primary);
        }
        
        .selected-emoji-display {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
        }
        
        .selected-emoji {
            font-size: 48px;
        }
        
        .selected-emoji-info {
            flex: 1;
        }
        
        .selected-emoji-name {
            font-weight: 600;
            color: var(--dark);
        }
        
        .selected-emoji-category {
            font-size: 14px;
            color: #666;
        }
        
        /* Enhanced Color Picker Styles */
        .color-picker-wrapper {
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid #e0e0e0;
        }
        
        .color-display {
            width: 100%;
            height: 120px;
            background: #0066FF;
            border-radius: 12px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1), 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .color-display::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 50%;
            background: linear-gradient(to bottom, rgba(255,255,255,0.2), transparent);
            pointer-events: none;
        }
        
        .color-info {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 15px;
        }
        
        #primaryColor {
            width: 60px;
            height: 60px;
            border: 3px solid white;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        #primaryColor::-webkit-color-swatch-wrapper {
            padding: 0;
            border-radius: 8px;
        }
        
        #primaryColor::-webkit-color-swatch {
            border: none;
            border-radius: 8px;
        }
        
        .color-value {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Courier New', monospace;
            font-size: 24px;
            font-weight: bold;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            letter-spacing: 1px;
        }
        
        .color-presets {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .preset-color {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .preset-color:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .preset-color.active {
            border-color: #333;
            transform: scale(1.1);
        }
        
        .color-label {
            font-size: 14px;
            color: #666;
            text-align: center;
            margin-top: 5px;
        }
        
        .generate-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: background 0.3s ease;
        }
        
        .generate-btn:hover {
            background: #0052cc;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .image-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .canvas-container {
            position: relative;
            background: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 200px;
            padding: 20px;
        }
        
        .canvas-container canvas {
            max-width: 100%;
            height: auto;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        
        .image-info {
            padding: 20px;
        }
        
        .image-info h3 {
            margin-bottom: 10px;
            color: var(--dark);
        }
        
        .image-info p {
            color: #666;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .download-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s ease;
            width: 100%;
        }
        
        .download-btn:hover {
            background: #0052cc;
        }
        
        .hidden {
            display: none;
        }
        
        /* Canvas Styles */
        .og-canvas, .twitter-canvas {
            display: none;
        }
        
        /* Loading State */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        /* Style Variations */
        .style-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .style-option {
            flex: 1;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }
        
        .style-option.active {
            border-color: var(--primary);
            background: rgba(0, 102, 255, 0.1);
        }
        
        .style-option h4 {
            margin-bottom: 5px;
            color: var(--dark);
        }
        
        .style-option p {
            font-size: 12px;
            color: #666;
        }
        
        /* Scrollbar styling for emoji grid */
        .emoji-grid::-webkit-scrollbar {
            width: 8px;
        }
        
        .emoji-grid::-webkit-scrollbar-track {
            background: #f0f0f0;
            border-radius: 4px;
        }
        
        .emoji-grid::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 4px;
        }
        
        .emoji-grid::-webkit-scrollbar-thumb:hover {
            background: #aaa;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🎨 Icon Image Generator</h1>
            <p>Create perfect social media images and favicons with any emoji or icon</p>
        </div>
        
        <div class="controls">
            <h2>Customize Your Icons</h2>
            
            <div class="style-selector">
                <div class="style-option active" data-style="default">
                    <h4>Default Style</h4>
                    <p>Clean, professional gradient</p>
                </div>
                <div class="style-option" data-style="bold">
                    <h4>Bold Style</h4>
                    <p>High contrast with patterns</p>
                </div>
                <div class="style-option" data-style="minimal">
                    <h4>Minimal Style</h4>
                    <p>Simple and elegant</p>
                </div>
            </div>
            
            <div class="control-group">
                <label for="emojiChoice">Choose Your Icon</label>
                <div class="emoji-picker-wrapper">
                    <input type="text" class="emoji-search" placeholder="Search emojis..." id="emojiSearch">
                    
                    <div class="emoji-categories">
                        <button class="category-btn active" data-category="all">All</button>
                        <button class="category-btn" data-category="popular">Popular</button>
                        <button class="category-btn" data-category="business">Business</button>
                        <button class="category-btn" data-category="tech">Tech</button>
                        <button class="category-btn" data-category="nature">Nature</button>
                        <button class="category-btn" data-category="food">Food</button>
                        <button class="category-btn" data-category="travel">Travel</button>
                        <button class="category-btn" data-category="activities">Activities</button>
                        <button class="category-btn" data-category="objects">Objects</button>
                        <button class="category-btn" data-category="symbols">Symbols</button>
                    </div>
                    
                    <div class="emoji-grid" id="emojiGrid">
                        <!-- Emojis will be populated here -->
                    </div>
                    
                    <div class="selected-emoji-display">
                        <span class="selected-emoji" id="selectedEmoji">🎨</span>
                        <div class="selected-emoji-info">
                            <div class="selected-emoji-name" id="selectedEmojiName">Artist Palette</div>
                            <div class="selected-emoji-category" id="selectedEmojiCategory">Activities</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="control-group">
                <label for="mainText">Main Text (for social cards)</label>
                <input type="text" id="mainText" value="Your Brand Name" />
            </div>
            
            <div class="control-group">
                <label for="tagline">Tagline (optional)</label>
                <input type="text" id="tagline" value="Your inspiring tagline here" />
            </div>
            
            <div class="control-group">
                <label for="primaryColor">Primary Color</label>
                <div class="color-picker-wrapper">
                    <div class="color-display">
                        <span class="color-value">#0066FF</span>
                    </div>
                    <div class="color-info">
                        <input type="color" id="primaryColor" value="#0066FF" />
                        <div class="color-presets">
                            <div class="preset-color" style="background: #0066FF" data-color="#0066FF" title="Default Blue"></div>
                            <div class="preset-color" style="background: #FF6B35" data-color="#FF6B35" title="Orange"></div>
                            <div class="preset-color" style="background: #00D4FF" data-color="#00D4FF" title="Cyan"></div>
                            <div class="preset-color" style="background: #7C3AED" data-color="#7C3AED" title="Purple"></div>
                            <div class="preset-color" style="background: #10B981" data-color="#10B981" title="Green"></div>
                            <div class="preset-color" style="background: #F59E0B" data-color="#F59E0B" title="Amber"></div>
                            <div class="preset-color" style="background: #EF4444" data-color="#EF4444" title="Red"></div>
                            <div class="preset-color" style="background: #1F2937" data-color="#1F2937" title="Dark"></div>
                        </div>
                    </div>
                    <div class="color-label">Click the square to pick a custom color, or choose a preset</div>
                </div>
            </div>
            
            <div class="control-group">
                <label for="websiteUrl">Website URL</label>
                <input type="text" id="websiteUrl" value="yourwebsite.com" placeholder="yourwebsite.com" />
            </div>
            
            <button class="generate-btn" onclick="generateAllImages()">Generate All Images</button>
        </div>
        
        <div id="imageContainer" class="hidden">
            <h2 style="margin: 30px 0;">Generated Images</h2>
            <div style="text-align: center; margin-bottom: 30px;">
                <button class="generate-btn" onclick="downloadAllAsZip()" style="background: var(--secondary); max-width: 400px;">
                    📦 Download All as ZIP
                </button>
            </div>
            <div class="image-grid" id="imageGrid">
                <!-- Images will be generated here -->
            </div>
        </div>
    </div>
    
    <!-- Hidden canvases for generation -->
    <canvas id="tempCanvas" style="display: none;"></canvas>
    
    <!-- Include JSZip library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    
    <script>
        let currentStyle = 'default';
        let selectedEmoji = '🎨';
        let selectedEmojiName = 'Artist Palette';
        
        // Comprehensive emoji database
        const emojiDatabase = {
            popular: [
                { emoji: '❤️', name: 'Red Heart', keywords: ['love', 'heart'] },
                { emoji: '⭐', name: 'Star', keywords: ['star', 'favorite'] },
                { emoji: '✨', name: 'Sparkles', keywords: ['sparkle', 'magic'] },
                { emoji: '🔥', name: 'Fire', keywords: ['hot', 'fire', 'flame'] },
                { emoji: '💯', name: '100', keywords: ['perfect', 'hundred'] },
                { emoji: '👍', name: 'Thumbs Up', keywords: ['like', 'good'] },
                { emoji: '🎉', name: 'Party', keywords: ['celebration', 'party'] },
                { emoji: '🚀', name: 'Rocket', keywords: ['launch', 'rocket', 'fast'] },
                { emoji: '💡', name: 'Light Bulb', keywords: ['idea', 'light'] },
                { emoji: '⚡', name: 'Lightning', keywords: ['electric', 'fast', 'bolt'] }
            ],
            business: [
                { emoji: '💼', name: 'Briefcase', keywords: ['business', 'work'] },
                { emoji: '📈', name: 'Chart Up', keywords: ['growth', 'chart', 'analytics'] },
                { emoji: '💰', name: 'Money Bag', keywords: ['money', 'cash', 'finance'] },
                { emoji: '🏦', name: 'Bank', keywords: ['bank', 'building', 'finance'] },
                { emoji: '💳', name: 'Credit Card', keywords: ['payment', 'card'] },
                { emoji: '📊', name: 'Bar Chart', keywords: ['data', 'chart', 'analytics'] },
                { emoji: '🏢', name: 'Office Building', keywords: ['office', 'corporate'] },
                { emoji: '🤝', name: 'Handshake', keywords: ['deal', 'partnership'] },
                { emoji: '📱', name: 'Mobile Phone', keywords: ['phone', 'mobile', 'tech'] },
                { emoji: '🎯', name: 'Target', keywords: ['goal', 'objective', 'target'] }
            ],
            tech: [
                { emoji: '💻', name: 'Laptop', keywords: ['computer', 'tech', 'work'] },
                { emoji: '🖥️', name: 'Desktop', keywords: ['computer', 'desktop'] },
                { emoji: '📱', name: 'Mobile', keywords: ['phone', 'mobile'] },
                { emoji: '⌨️', name: 'Keyboard', keywords: ['typing', 'keyboard'] },
                { emoji: '🖱️', name: 'Mouse', keywords: ['click', 'mouse'] },
                { emoji: '💾', name: 'Floppy Disk', keywords: ['save', 'storage'] },
                { emoji: '💿', name: 'CD', keywords: ['disc', 'media'] },
                { emoji: '🔋', name: 'Battery', keywords: ['power', 'energy'] },
                { emoji: '🔌', name: 'Plug', keywords: ['electric', 'power'] },
                { emoji: '🎮', name: 'Game Controller', keywords: ['gaming', 'play'] }
            ],
            nature: [
                { emoji: '🌳', name: 'Tree', keywords: ['nature', 'tree', 'forest'] },
                { emoji: '🌸', name: 'Cherry Blossom', keywords: ['flower', 'spring'] },
                { emoji: '🌻', name: 'Sunflower', keywords: ['flower', 'sun'] },
                { emoji: '🌿', name: 'Herb', keywords: ['plant', 'green'] },
                { emoji: '🍃', name: 'Leaf', keywords: ['nature', 'wind'] },
                { emoji: '🌍', name: 'Earth', keywords: ['world', 'globe', 'planet'] },
                { emoji: '☀️', name: 'Sun', keywords: ['sunny', 'bright'] },
                { emoji: '🌙', name: 'Moon', keywords: ['night', 'moon'] },
                { emoji: '⭐', name: 'Star', keywords: ['star', 'night'] },
                { emoji: '🌊', name: 'Wave', keywords: ['ocean', 'water'] }
            ],
            food: [
                { emoji: '🍕', name: 'Pizza', keywords: ['food', 'pizza'] },
                { emoji: '🍔', name: 'Burger', keywords: ['food', 'burger'] },
                { emoji: '🍟', name: 'Fries', keywords: ['food', 'fries'] },
                { emoji: '🌮', name: 'Taco', keywords: ['food', 'mexican'] },
                { emoji: '🍜', name: 'Ramen', keywords: ['food', 'noodles'] },
                { emoji: '🍱', name: 'Bento', keywords: ['food', 'japanese'] },
                { emoji: '🍰', name: 'Cake', keywords: ['dessert', 'sweet'] },
                { emoji: '☕', name: 'Coffee', keywords: ['drink', 'coffee'] },
                { emoji: '🍷', name: 'Wine', keywords: ['drink', 'alcohol'] },
                { emoji: '🥤', name: 'Drink', keywords: ['beverage', 'soda'] }
            ],
            travel: [
                { emoji: '✈️', name: 'Airplane', keywords: ['travel', 'fly'] },
                { emoji: '🚗', name: 'Car', keywords: ['drive', 'vehicle'] },
                { emoji: '🚢', name: 'Ship', keywords: ['boat', 'cruise'] },
                { emoji: '🗺️', name: 'Map', keywords: ['navigation', 'travel'] },
                { emoji: '🏖️', name: 'Beach', keywords: ['vacation', 'beach'] },
                { emoji: '🏔️', name: 'Mountain', keywords: ['hiking', 'nature'] },
                { emoji: '🗽', name: 'Statue of Liberty', keywords: ['landmark', 'NYC'] },
                { emoji: '🏰', name: 'Castle', keywords: ['history', 'medieval'] },
                { emoji: '🎡', name: 'Ferris Wheel', keywords: ['amusement', 'fun'] },
                { emoji: '🌉', name: 'Bridge', keywords: ['architecture', 'city'] }
            ],
            activities: [
                { emoji: '🎨', name: 'Artist Palette', keywords: ['art', 'creative'] },
                { emoji: '🎭', name: 'Theater', keywords: ['drama', 'masks'] },
                { emoji: '🎪', name: 'Circus', keywords: ['entertainment', 'tent'] },
                { emoji: '🎯', name: 'Target', keywords: ['goal', 'aim'] },
                { emoji: '🎮', name: 'Video Game', keywords: ['gaming', 'controller'] },
                { emoji: '🎸', name: 'Guitar', keywords: ['music', 'rock'] },
                { emoji: '🎹', name: 'Piano', keywords: ['music', 'keyboard'] },
                { emoji: '📷', name: 'Camera', keywords: ['photo', 'photography'] },
                { emoji: '🎬', name: 'Film', keywords: ['movie', 'cinema'] },
                { emoji: '📚', name: 'Books', keywords: ['reading', 'library'] }
            ],
            objects: [
                { emoji: '📦', name: 'Package', keywords: ['box', 'delivery'] },
                { emoji: '🎁', name: 'Gift', keywords: ['present', 'birthday'] },
                { emoji: '🔔', name: 'Bell', keywords: ['notification', 'ring'] },
                { emoji: '🔑', name: 'Key', keywords: ['security', 'access'] },
                { emoji: '🔨', name: 'Hammer', keywords: ['tool', 'build'] },
                { emoji: '⚙️', name: 'Gear', keywords: ['settings', 'mechanical'] },
                { emoji: '🧲', name: 'Magnet', keywords: ['attract', 'magnetic'] },
                { emoji: '💎', name: 'Diamond', keywords: ['gem', 'precious'] },
                { emoji: '⏰', name: 'Alarm Clock', keywords: ['time', 'wake'] },
                { emoji: '🔍', name: 'Magnifying Glass', keywords: ['search', 'find'] }
            ],
            symbols: [
                { emoji: '✅', name: 'Check Mark', keywords: ['done', 'complete'] },
                { emoji: '❌', name: 'Cross Mark', keywords: ['wrong', 'no'] },
                { emoji: '❓', name: 'Question', keywords: ['help', 'question'] },
                { emoji: '❗', name: 'Exclamation', keywords: ['important', 'alert'] },
                { emoji: '💬', name: 'Speech Bubble', keywords: ['chat', 'talk'] },
                { emoji: '📍', name: 'Pin', keywords: ['location', 'map'] },
                { emoji: '🔗', name: 'Link', keywords: ['chain', 'connect'] },
                { emoji: '➡️', name: 'Arrow Right', keywords: ['next', 'forward'] },
                { emoji: '⬆️', name: 'Arrow Up', keywords: ['up', 'increase'] },
                { emoji: '♻️', name: 'Recycle', keywords: ['eco', 'green'] }
            ]
        };
        
        // Get all emojis
        function getAllEmojis() {
            const all = [];
            Object.values(emojiDatabase).forEach(category => {
                all.push(...category);
            });
            return all;
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateColorDisplay();
            populateEmojis('all');
            
            // Category buttons
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.category-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    populateEmojis(this.dataset.category);
                });
            });
            
            // Emoji search
            document.getElementById('emojiSearch').addEventListener('input', function(e) {
                searchEmojis(e.target.value);
            });
            
            // Color presets
            document.querySelectorAll('.preset-color').forEach(preset => {
                preset.addEventListener('click', function() {
                    const color = this.dataset.color;
                    document.getElementById('primaryColor').value = color;
                    updateColorDisplay();
                });
            });
        });
        
        // Populate emoji grid
        function populateEmojis(category) {
            const grid = document.getElementById('emojiGrid');
            grid.innerHTML = '';
            
            const emojis = category === 'all' ? getAllEmojis() : emojiDatabase[category] || [];
            
            emojis.forEach(item => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.textContent = item.emoji;
                div.title = item.name;
                div.dataset.name = item.name;
                
                if (item.emoji === selectedEmoji) {
                    div.classList.add('selected');
                }
                
                div.addEventListener('click', function() {
                    selectEmoji(item.emoji, item.name);
                });
                
                grid.appendChild(div);
            });
        }
        
        // Search emojis
        function searchEmojis(query) {
            if (!query) {
                populateEmojis('all');
                return;
            }
            
            const grid = document.getElementById('emojiGrid');
            grid.innerHTML = '';
            
            const allEmojis = getAllEmojis();
            const results = allEmojis.filter(item => 
                item.name.toLowerCase().includes(query.toLowerCase()) ||
                item.keywords.some(k => k.toLowerCase().includes(query.toLowerCase()))
            );
            
            results.forEach(item => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.textContent = item.emoji;
                div.title = item.name;
                
                if (item.emoji === selectedEmoji) {
                    div.classList.add('selected');
                }
                
                div.addEventListener('click', function() {
                    selectEmoji(item.emoji, item.name);
                });
                
                grid.appendChild(div);
            });
        }
        
        // Select emoji
        function selectEmoji(emoji, name) {
            selectedEmoji = emoji;
            selectedEmojiName = name;
            
            document.getElementById('selectedEmoji').textContent = emoji;
            document.getElementById('selectedEmojiName').textContent = name;
            
            // Update selected state
            document.querySelectorAll('.emoji-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.textContent === emoji) {
                    opt.classList.add('selected');
                }
            });
            
            // Find category
            let foundCategory = 'Other';
            for (const [cat, items] of Object.entries(emojiDatabase)) {
                if (items.some(item => item.emoji === emoji)) {
                    foundCategory = cat.charAt(0).toUpperCase() + cat.slice(1);
                    break;
                }
            }
            document.getElementById('selectedEmojiCategory').textContent = foundCategory;
        }
        
        // Style option selection
        document.querySelectorAll('.style-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.style-option').forEach(opt => opt.classList.remove('active'));
                this.classList.add('active');
                currentStyle = this.dataset.style;
            });
        });
        
        // Update color display
        document.getElementById('primaryColor').addEventListener('input', updateColorDisplay);
        
        function updateColorDisplay() {
            const color = document.getElementById('primaryColor').value;
            document.querySelector('.color-value').textContent = color.toUpperCase();
            document.querySelector('.color-display').style.background = color;
            
            // Update active preset if it matches
            document.querySelectorAll('.preset-color').forEach(preset => {
                if (preset.dataset.color.toUpperCase() === color.toUpperCase()) {
                    preset.classList.add('active');
                } else {
                    preset.classList.remove('active');
                }
            });
        }
        
        // Image configurations
        const imageConfigs = [
            // Social Media Images
            { name: 'og-image', width: 1200, height: 630, type: 'social', format: 'jpg', description: 'Facebook, LinkedIn sharing' },
            { name: 'twitter-card', width: 1200, height: 600, type: 'social', format: 'jpg', description: 'Twitter sharing' },
            
            // Favicon Images
            { name: 'favicon-16x16', width: 16, height: 16, type: 'favicon', format: 'png', description: 'Browser tab icon' },
            { name: 'favicon-32x32', width: 32, height: 32, type: 'favicon', format: 'png', description: 'Browser tab icon' },
            { name: 'favicon', width: 48, height: 48, type: 'favicon', format: 'ico', description: 'Legacy favicon' },
            
            // Apple Icons
            { name: 'apple-touch-icon', width: 180, height: 180, type: 'favicon', format: 'png', description: 'iOS home screen' },
            
            // Android Icons
            { name: 'android-chrome-192x192', width: 192, height: 192, type: 'favicon', format: 'png', description: 'Android Chrome' },
            { name: 'android-chrome-512x512', width: 512, height: 512, type: 'favicon', format: 'png', description: 'Android Chrome (large)' },
            
            // Windows Tile
            { name: 'mstile-150x150', width: 150, height: 150, type: 'favicon', format: 'png', description: 'Windows tile' },
        ];
        
        function generateAllImages() {
            const container = document.getElementById('imageContainer');
            const grid = document.getElementById('imageGrid');
            
            // Reset generated canvases
            generatedCanvases = {};
            
            container.classList.remove('hidden');
            grid.innerHTML = '<div class="loading">Generating images...</div>';
            
            setTimeout(() => {
                grid.innerHTML = '';
                
                imageConfigs.forEach(config => {
                    const imageCard = createImageCard(config);
                    grid.appendChild(imageCard);
                });
            }, 100);
        }
        
        // Store all generated canvases globally for ZIP download
        let generatedCanvases = {};
        
        function createImageCard(config) {
            const card = document.createElement('div');
            card.className = 'image-card';
            
            const canvasContainer = document.createElement('div');
            canvasContainer.className = 'canvas-container';
            
            const canvas = document.createElement('canvas');
            canvas.width = config.width;
            canvas.height = config.height;
            
            // Generate the image
            if (config.type === 'social') {
                drawSocialCard(canvas, config);
            } else {
                drawFavicon(canvas, config);
            }
            
            // Store canvas for ZIP download
            generatedCanvases[`${config.name}.${config.format}`] = {
                canvas: canvas,
                format: config.format,
                name: config.name
            };
            
            canvasContainer.appendChild(canvas);
            
            const info = document.createElement('div');
            info.className = 'image-info';
            info.innerHTML = `
                <h3>${config.name}.${config.format}</h3>
                <p>${config.width}x${config.height}px - ${config.description}</p>
                <button class="download-btn" onclick="downloadImage('${config.name}', '${config.format}', this)">
                    Download ${config.format.toUpperCase()}
                </button>
            `;
            
            card.appendChild(canvasContainer);
            card.appendChild(info);
            
            // Store canvas reference for download
            card.canvas = canvas;
            
            return card;
        }
        
        function drawSocialCard(canvas, config) {
            const ctx = canvas.getContext('2d');
            const emoji = selectedEmoji;
            const mainText = document.getElementById('mainText').value;
            const tagline = document.getElementById('tagline').value;
            const websiteUrl = document.getElementById('websiteUrl').value;
            const primaryColor = document.getElementById('primaryColor').value;
            
            // Background
            if (currentStyle === 'default') {
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#0A0E27');
                gradient.addColorStop(1, '#050714');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Decorative circle
                ctx.beginPath();
                ctx.arc(canvas.width * 0.8, canvas.height * 0.3, 300, 0, Math.PI * 2);
                ctx.fillStyle = 'rgba(0, 102, 255, 0.1)';
                ctx.fill();
            } else if (currentStyle === 'bold') {
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Grid pattern
                ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
                ctx.lineWidth = 1;
                for (let i = 0; i < canvas.width; i += 50) {
                    ctx.beginPath();
                    ctx.moveTo(i, 0);
                    ctx.lineTo(i, canvas.height);
                    ctx.stroke();
                }
                for (let i = 0; i < canvas.height; i += 50) {
                    ctx.beginPath();
                    ctx.moveTo(0, i);
                    ctx.lineTo(canvas.width, i);
                    ctx.stroke();
                }
            } else {
                ctx.fillStyle = '#FFFFFF';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            
            // Content based on card type
            if (config.name === 'og-image') {
                // Emoji
                ctx.font = '120px Arial';
                ctx.textAlign = 'center';
                ctx.fillStyle = currentStyle === 'minimal' ? '#000' : '#fff';
                ctx.fillText(emoji, canvas.width / 2, 200);
                
                // Title
                ctx.font = 'bold 72px Inter';
                ctx.fillText(mainText, canvas.width / 2, 320);
                
                // Tagline
                if (tagline) {
                    ctx.font = '32px Inter';
                    ctx.fillStyle = currentStyle === 'minimal' ? 'rgba(0, 0, 0, 0.7)' : 'rgba(255, 255, 255, 0.9)';
                    ctx.fillText(tagline, canvas.width / 2, 400);
                }
                
                // Website URL
                if (websiteUrl) {
                    ctx.font = '24px Inter';
                    ctx.fillStyle = primaryColor;
                    ctx.fillText(websiteUrl, canvas.width / 2, 520);
                }
            } else {
                // Twitter card - more focused
                ctx.font = '100px Arial';
                ctx.textAlign = 'left';
                ctx.fillStyle = currentStyle === 'minimal' ? '#000' : '#fff';
                ctx.fillText(emoji, 80, 180);
                
                ctx.font = 'bold 64px Inter';
                ctx.fillText(mainText, 80, 300);
                
                if (tagline) {
                    ctx.font = '32px Inter';
                    ctx.fillStyle = currentStyle === 'minimal' ? 'rgba(0, 0, 0, 0.7)' : 'rgba(255, 255, 255, 0.9)';
                    ctx.fillText(tagline, 80, 380);
                }
                
                if (websiteUrl) {
                    ctx.font = '28px Inter';
                    ctx.fillStyle = primaryColor;
                    ctx.fillText(websiteUrl, 80, 500);
                }
            }
        }
        
        function drawFavicon(canvas, config) {
            const ctx = canvas.getContext('2d');
            const emoji = selectedEmoji;
            const primaryColor = document.getElementById('primaryColor').value;
            
            // Background
            if (currentStyle === 'minimal' || config.width < 100) {
                ctx.fillStyle = '#fff';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            } else {
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, primaryColor);
                gradient.addColorStop(1, '#050714');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
            }
            
            // Emoji centered
            const fontSize = config.width <= 32 ? config.width * 0.8 : config.width * 0.6;
            ctx.font = `${fontSize}px Arial`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillStyle = currentStyle === 'minimal' ? '#000' : '#fff';
            ctx.fillText(emoji, canvas.width / 2, canvas.height / 2);
        }
        
        // Helper function to convert canvas to ICO format
        function canvasToIco(canvases) {
            // ICO Header
            let ico = new ArrayBuffer(6 + (16 * canvases.length) + canvases.reduce((sum, c) => sum + c.data.length, 0));
            let view = new DataView(ico);
            let offset = 0;
            
            // ICONDIR structure
            view.setUint16(0, 0, true); // Reserved
            view.setUint16(2, 1, true); // Type (1 = ICO)
            view.setUint16(4, canvases.length, true); // Number of images
            offset = 6;
            
            let imageOffset = 6 + (16 * canvases.length);
            
            // ICONDIRENTRY structures
            canvases.forEach(canvas => {
                view.setUint8(offset + 0, canvas.width < 256 ? canvas.width : 0); // Width
                view.setUint8(offset + 1, canvas.height < 256 ? canvas.height : 0); // Height
                view.setUint8(offset + 2, 0); // Color palette
                view.setUint8(offset + 3, 0); // Reserved
                view.setUint16(offset + 4, 1, true); // Color planes
                view.setUint16(offset + 6, 32, true); // Bits per pixel
                view.setUint32(offset + 8, canvas.data.length, true); // Image data size
                view.setUint32(offset + 12, imageOffset, true); // Image data offset
                offset += 16;
                imageOffset += canvas.data.length;
            });
            
            // Image data
            let dataOffset = 6 + (16 * canvases.length);
            canvases.forEach(canvas => {
                let uint8View = new Uint8Array(ico, dataOffset);
                uint8View.set(new Uint8Array(canvas.data));
                dataOffset += canvas.data.length;
            });
            
            return new Blob([ico], { type: 'image/x-icon' });
        }
        
        // Convert canvas to PNG data for ICO
        async function canvasToPngData(canvas) {
            return new Promise((resolve) => {
                canvas.toBlob(blob => {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        const arrayBuffer = reader.result;
                        resolve({
                            width: canvas.width,
                            height: canvas.height,
                            data: arrayBuffer
                        });
                    };
                    reader.readAsArrayBuffer(blob);
                }, 'image/png');
            });
        }
        
        async function downloadImage(filename, format, button) {
            const card = button.closest('.image-card');
            const canvas = card.canvas;
            
            if (format === 'ico') {
                // Create multiple sizes for ICO
                const sizes = [16, 32, 48];
                const canvases = [];
                
                for (const size of sizes) {
                    const tempCanvas = document.createElement('canvas');
                    tempCanvas.width = size;
                    tempCanvas.height = size;
                    const tempCtx = tempCanvas.getContext('2d');
                    
                    // Draw the favicon at this size
                    drawFavicon(tempCanvas, { width: size, height: size });
                    
                    const pngData = await canvasToPngData(tempCanvas);
                    canvases.push(pngData);
                }
                
                const icoBlob = canvasToIco(canvases);
                const url = URL.createObjectURL(icoBlob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${filename}.ico`;
                a.click();
                URL.revokeObjectURL(url);
            } else {
                const mimeType = format === 'jpg' ? 'image/jpeg' : 'image/png';
                const quality = format === 'jpg' ? 0.9 : undefined;
                
                canvas.toBlob(blob => {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${filename}.${format}`;
                    a.click();
                    URL.revokeObjectURL(url);
                }, mimeType, quality);
            }
        }
        
        // Download all images as ZIP
        async function downloadAllAsZip() {
            const zip = new JSZip();
            const brandName = document.getElementById('mainText').value || 'icons';
            const folderName = brandName.toLowerCase().replace(/\s+/g, '-');
            
            // Create folders
            const socialFolder = zip.folder('social-media');
            const iconsFolder = zip.folder('icons');
            
            // Process each canvas
            for (const [filename, data] of Object.entries(generatedCanvases)) {
                const { canvas, format, name } = data;
                
                try {
                    if (format === 'ico') {
                        // Special handling for ICO files
                        const sizes = [16, 32, 48];
                        const canvases = [];
                        
                        for (const size of sizes) {
                            const tempCanvas = document.createElement('canvas');
                            tempCanvas.width = size;
                            tempCanvas.height = size;
                            drawFavicon(tempCanvas, { width: size, height: size });
                            const pngData = await canvasToPngData(tempCanvas);
                            canvases.push(pngData);
                        }
                        
                        const icoBlob = canvasToIco(canvases);
                        iconsFolder.file(filename, icoBlob);
                    } else {
                        // Regular image formats
                        const mimeType = format === 'jpg' ? 'image/jpeg' : 'image/png';
                        const quality = format === 'jpg' ? 0.9 : undefined;
                        
                        const blob = await new Promise(resolve => {
                            canvas.toBlob(blob => resolve(blob), mimeType, quality);
                        });
                        
                        // Add to appropriate folder
                        if (name.includes('og-image') || name.includes('twitter-card')) {
                            socialFolder.file(filename, blob);
                        } else {
                            iconsFolder.file(filename, blob);
                        }
                    }
                } catch (error) {
                    console.error(`Error processing ${filename}:`, error);
                }
            }
            
            // Add a README file
            const readme = `# ${brandName} Brand Assets

Generated on: ${new Date().toLocaleDateString()}

## Included Files:

### Social Media Images:
- og-image.jpg (1200x630) - Facebook, LinkedIn sharing
- twitter-card.jpg (1200x600) - Twitter sharing

### Icons:
- favicon.ico (16x16, 32x32, 48x48) - Browser favicon
- favicon-16x16.png - Small browser icon
- favicon-32x32.png - Standard browser icon
- apple-touch-icon.png (180x180) - iOS home screen
- android-chrome-192x192.png - Android Chrome
- android-chrome-512x512.png - Android Chrome (large)
- mstile-150x150.png - Windows tile

## How to Use:

1. Upload all icon files to your website's root directory
2. Add the following to your HTML <head>:

\`\`\`html
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="manifest" href="/site.webmanifest">
<meta property="og:image" content="https://${document.getElementById('websiteUrl').value}/og-image.jpg">
<meta name="twitter:image" content="https://${document.getElementById('websiteUrl').value}/twitter-card.jpg">
\`\`\`

Generated with Icon Image Generator
`;
            
            zip.file('README.md', readme);
            
            // Generate and download ZIP
            try {
                const content = await zip.generateAsync({ type: 'blob' });
                saveAs(content, `${folderName}-brand-assets.zip`);
            } catch (error) {
                console.error('Error creating ZIP:', error);
                alert('Error creating ZIP file. Please try downloading images individually.');
            }
        }
    </script>
</body>
</html>